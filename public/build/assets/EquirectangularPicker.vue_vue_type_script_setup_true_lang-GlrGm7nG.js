import{d as _,p as B,f as p,c as n,o as s,b as u,v as C,m as f,B as N}from"./app-MbwmxENq.js";const P={class:"space-y-2"},E={key:0,class:"text-sm text-muted-foreground"},M=["src"],S={key:1,class:"pointer-events-none absolute bottom-2 left-2 rounded bg-black/60 px-2 py-1 text-xs text-white"},F=_({__name:"EquirectangularPicker",props:{src:{default:null},lat:{default:null},lon:{default:null},disabled:{type:Boolean,default:!1}},emits:["update:lat","update:lon"],setup(b,{emit:h}){const o=b,c=h,a=B(null);function r(t,e,l){return Math.min(l,Math.max(e,t))}function d(t,e=6){const l=Math.pow(10,e);return Math.round(t*l)/l}const v=p(()=>Number.isFinite(o.lat)&&Number.isFinite(o.lon)),m=p(()=>{if(!v.value)return null;const t=r(Number(o.lat),-90,90);let e=Number(o.lon);e=((e+180)%360+360)%360-180;const l=(e+180)/360,i=(90-t)/180;return{left:`${l*100}%`,top:`${i*100}%`}});function k(t){if(o.disabled||!a.value||!o.src)return;const e=a.value.getBoundingClientRect(),l=t.clientX-e.left,i=t.clientY-e.top,g=r(l/e.width,0,1),y=r(i/e.height,0,1),w=d(g*360-180,6),x=d(90-y*180,6);c("update:lat",x),c("update:lon",w)}return(t,e)=>(s(),n("div",P,[e[1]||(e[1]=u("div",{class:"text-sm font-medium"},"Pick hotspot coordinates",-1)),t.src?(s(),n("div",{key:1,class:C(["relative w-full overflow-hidden rounded-md border bg-black/5",t.disabled?"opacity-60":""])},[u("img",{ref_key:"imgEl",ref:a,src:t.src,alt:"Photosphere preview",class:"block w-full select-none",draggable:"false",onClick:k},null,8,M),m.value?(s(),n("div",{key:0,class:"absolute -translate-x-1/2 -translate-y-1/2",style:N(m.value),"aria-hidden":"true"},e[0]||(e[0]=[u("div",{class:"h-4 w-4 rounded-full border-2 border-white bg-black/70 shadow"},null,-1)]),4)):f("",!0),t.disabled?f("",!0):(s(),n("div",S," Click to set latitude/longitude "))],2)):(s(),n("div",E," Select a photosphere to enable picking. "))]))}});export{F as _};
//# sourceMappingURL=EquirectangularPicker.vue_vue_type_script_setup_true_lang-GlrGm7nG.js.map
